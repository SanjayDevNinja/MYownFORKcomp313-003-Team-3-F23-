<%- include partials/navbar.ejs %>
  <!-- change all time git -->
  <!-- how to git https://stackoverflow.com/questions/1221840/remote-origin-already-exists-on-git-push-to-a-new-repository -->

  <!-- Main Content -->
  <div class="main">
    <header>
      <div class="hero-section">
        <div class="welcome-text">
          <h1>Books On the Fly - Library Drone Delivery System</h1>
          <p>Explore our collection of books and find your next adventure!</p>
          <img src="../Assets/images/Drone.jpg" alt="Book 1" class="w-50" />
          <br /><br />
          <p>Get books delivered to your home in 15 mins with Speedy Drone Delivery</p>

        </div>
        <div class="book-slider">
          <div id="carouselExample" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="../Assets/images/book1.jpg" alt="Book 1" class="d-block w-100" />
              </div>
              <div class="carousel-item">
                <img src="../Assets/images/book2.jpg" alt="Book 2" class="d-block w-100" />
              </div>
              <div class="carousel-item">
                <img src="../Assets/images/book3.jpg" alt="Book 3" class="d-block w-100" />
              </div>
              <!-- Add more book images as needed -->
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="container">

      <h2>Available Books</h2>

      <p>Search all book details:</p>
      <input class="form-control" id="myInput" type="text" placeholder="Search..">
      <div class="card-group">
        <% books.forEach(function(book) { %>
          <div class="card"
            style="margin: 15px; border: 1px solid black; border-radius: 0px; min-width: 250px; max-width: 400px;">
            <img src="/<%=book.image%>" class="card-img-top" alt="<%=book.title%>"
              style="width: 100%; max-height: 200px; object-fit: contain; border-bottom: 1px solid black;"
              onerror="this.onerror=null;this.src='/noImage.png';">
            <div class="card-body">
              <h5 class="card-title" style="text-align: center;">
                <%= book.title %>
              </h5>
              <i style="text-align: center; display: block;">by <%= book.author %></i>
              <p>Copies Available: <%= book.copiesAvailable %>
              </p>
              <hr>
              <p class="card-text">
                <%= book.description %>
              </p>
              <hr>
              <a href="/book-details/<%= book._id %>" class="btn btn-primary">Price: $<%= book.isbn %></a>
              <% if (book.weight) { %>
                <button class="btn btn-danger">SOLD</button>
                <% } %>
                  <br>
                  <small class="text-muted">Book viewed <%= book.genre %> times</small>
            </div>
            <div class="card-footer">
              <small class="text-muted">
                Genre: <%= book.genre %> <br>
                  ISBN: <%= book.isbn %> <br>
                    Sold by: <%= book.publishedDate %> <br>
                      Date Added: <%= new Date(book.publishedDate).toLocaleString("en-CA") %> <br>
              </small>
            </div>
          </div>
          <% }); %>
      </div>

    </main>

  </div>



  <script>
    $(document).ready(function () {
      $("#myInput").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".card").filter(function () {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });
  </script>

  <%- include partials/footer.ejs %>